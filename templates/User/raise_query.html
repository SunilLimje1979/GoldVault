<!doctype html>
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Raise Query</title>
    <meta name="keywords" content="bootstrap, wallet, banking, fintech mobile template, cordova, phonegap, mobile, html, responsive" />
    <link rel="icon" type="image/png" href="{% static 'assets/img/favicon.png' %}" sizes="32x32">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@latest/dist/ionicons/ionicons.esm.js"></script>
</head>
<body>

<div class="appHeader">
    <div class="left">
        <a href="{% url 'setting' %}" class="headerButton goBack">
            <ion-icon name="chevron-back-outline"></ion-icon>
        </a>
    </div>
    <div class="pageTitle" style="font-family:'Poppins',sans-serif;font-size:17px;font-weight:500;">
        Raise A Query
    </div>
</div>

<div id="appCapsule">
    <div class="section mt-2">
        <form method="post" action="{% url 'raise_query' %}">
            {% csrf_token %}

            <div class="card">
                <div class="card-body pb-1">

                    <!-- Floating: Subject -->
                    <div class="form-group basic animated">
                        <div class="input-wrapper">
                            <label class="label" for="QuerySubject">Subject</label>
                            <input
                                type="text"
                                id="QuerySubject"
                                name="QuerySubject"
                                class="form-control"
                                placeholder="Subject"
                                required
                            />
                            <i class="clear-input">
                                <ion-icon name="close-circle"></ion-icon>
                            </i>
                        </div>
                    </div>

                    <!-- Floating: Query Text -->
                    <div class="form-group basic animated">
                        <div class="input-wrapper">
                            <label class="label" for="QueryText">Query Text</label>
                            <textarea
                                id="QueryText"
                                name="QueryText"
                                class="form-control"
                                rows="3"
                                placeholder="Query Text"
                                required
                            ></textarea>
                            <i class="clear-input">
                                <ion-icon name="close-circle"></ion-icon>
                            </i>
                        </div>
                    </div>

                </div>
            </div>

            <div class="row mt-4">
                <div class="col-12 mb-2 px-4">
                    <button type="submit" class="btn btn-block btn-lg w-100"
                        style="background-color:#edc88f !important;border-color:#edc88f !important;color:black !important;border-radius:8px;font-weight:600;">
                        Submit
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Required JS for floating labels/clear icons -->
<script src="{% static 'assets/js/lib/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'assets/js/base.js' %}"></script>

<!-- Ensure labels float when fields prefilled (e.g., after POST errors) -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.form-control').forEach(function (el) {
        if (el.value && el.value.trim() !== '') {
            el.classList.add('not-empty');
        }
        el.addEventListener('input', function () {
            if (this.value && this.value.trim() !== '') {
                this.classList.add('not-empty');
            } else {
                this.classList.remove('not-empty');
            }
        });
    });
});
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>

    {% if messages %}
        <script>
            {% for message in messages %}
                var msg = "{{ message|escapejs }}";
                var tag = "{{ message.tags }}";

                {% comment %} console.log(msg);
                console.log(tag); {% endcomment %}
                var alertType = "info";
                var alertTitle = "Info"; 

                if (tag.includes("success")) {
                    alertType = "success";
                    alertTitle = "Success!";
                } else if (tag.includes("danger")) {
                    alertType = "error";
                    alertTitle = "Error!";
                }

                swal({
                    title: alertTitle,
                    text: msg,
                    type: alertType,
                    //timer: 5000,
                    showConfirmButton: true
                });
            {% endfor %}
        </script>
    {% endif %}
</body>
</html>
